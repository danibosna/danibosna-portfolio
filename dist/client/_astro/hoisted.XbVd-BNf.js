import{s as L,n as g}from"./router.nTnAVDTI.js";class o extends HTMLElement{connectedCallback(){this.videoId=this.getAttribute("videoid");let e=this.querySelector(".lty-playbtn");if(this.playLabel=e&&e.textContent.trim()||this.getAttribute("playlabel")||"Play",this.dataset.title=this.getAttribute("title")||"",this.style.backgroundImage||(this.style.backgroundImage=`url("https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg")`,this.upgradePosterImage()),e||(e=document.createElement("button"),e.type="button",e.classList.add("lty-playbtn"),this.append(e)),!e.textContent){const n=document.createElement("span");n.className="lyt-visually-hidden",n.textContent=this.playLabel,e.append(n)}this.addNoscriptIframe(),e.removeAttribute("href"),this.addEventListener("pointerover",o.warmConnections,{once:!0}),this.addEventListener("click",this.activate),this.needsYTApi=this.hasAttribute("js-api")||navigator.vendor.includes("Apple")||navigator.userAgent.includes("Mobi")}static addPrefetch(e,n,r){const a=document.createElement("link");a.rel=e,a.href=n,r&&(a.as=r),document.head.append(a)}static warmConnections(){o.preconnected||(o.addPrefetch("preconnect","https://www.youtube-nocookie.com"),o.addPrefetch("preconnect","https://www.google.com"),o.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),o.addPrefetch("preconnect","https://static.doubleclick.net"),o.preconnected=!0)}fetchYTPlayerApi(){window.YT||window.YT&&window.YT.Player||(this.ytApiPromise=new Promise((e,n)=>{var r=document.createElement("script");r.src="https://www.youtube.com/iframe_api",r.async=!0,r.onload=a=>{YT.ready(e)},r.onerror=n,this.append(r)}))}async getYTPlayer(){return this.playerPromise||await this.activate(),this.playerPromise}async addYTPlayerIframe(){this.fetchYTPlayerApi(),await this.ytApiPromise;const e=document.createElement("div");this.append(e);const n=Object.fromEntries(this.getParams().entries());this.playerPromise=new Promise(r=>{let a=new YT.Player(e,{width:"100%",videoId:this.videoId,playerVars:n,events:{onReady:i=>{i.target.playVideo(),r(a)}}})})}addNoscriptIframe(){const e=this.createBasicIframe(),n=document.createElement("noscript");n.innerHTML=e.outerHTML,this.append(n)}getParams(){const e=new URLSearchParams(this.getAttribute("params")||[]);return e.append("autoplay","1"),e.append("playsinline","1"),e}async activate(){if(this.classList.contains("lyt-activated"))return;if(this.classList.add("lyt-activated"),this.needsYTApi)return this.addYTPlayerIframe(this.getParams());const e=this.createBasicIframe();this.append(e),e.focus()}createBasicIframe(){const e=document.createElement("iframe");return e.width=560,e.height=315,e.title=this.playLabel,e.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",e.allowFullscreen=!0,e.src=`https://www.youtube-nocookie.com/embed/${encodeURIComponent(this.videoId)}?${this.getParams().toString()}`,e}upgradePosterImage(){setTimeout(()=>{const e=`https://i.ytimg.com/vi_webp/${this.videoId}/sddefault.webp`,n=new Image;n.fetchPriority="low",n.referrerpolicy="origin",n.src=e,n.onload=r=>{r.target.naturalHeight==90&&r.target.naturalWidth==120||(this.style.backgroundImage=`url("${e}")`)}},100)}}customElements.define("lite-youtube",o);const v=new Set,l=new WeakSet;let u,b,y=!1;function T(t){y||(y=!0,u??=t?.prefetchAll??!1,b??=t?.defaultStrategy??"hover",I(),k(),S(),M())}function I(){for(const t of["touchstart","mousedown"])document.body.addEventListener(t,e=>{s(e.target,"tap")&&d(e.target.href,{ignoreSlowConnection:!0})},{passive:!0})}function k(){let t;document.body.addEventListener("focusin",r=>{s(r.target,"hover")&&e(r)},{passive:!0}),document.body.addEventListener("focusout",n,{passive:!0}),f(()=>{for(const r of document.getElementsByTagName("a"))l.has(r)||s(r,"hover")&&(l.add(r),r.addEventListener("mouseenter",e,{passive:!0}),r.addEventListener("mouseleave",n,{passive:!0}))});function e(r){const a=r.target.href;t&&clearTimeout(t),t=setTimeout(()=>{d(a)},80)}function n(){t&&(clearTimeout(t),t=0)}}function S(){let t;f(()=>{for(const e of document.getElementsByTagName("a"))l.has(e)||s(e,"viewport")&&(l.add(e),t??=H(),t.observe(e))})}function H(){const t=new WeakMap;return new IntersectionObserver((e,n)=>{for(const r of e){const a=r.target,i=t.get(a);r.isIntersecting?(i&&clearTimeout(i),t.set(a,setTimeout(()=>{n.unobserve(a),t.delete(a),d(a.href)},300))):i&&(clearTimeout(i),t.delete(a))}})}function M(){f(()=>{for(const t of document.getElementsByTagName("a"))s(t,"load")&&d(t.href)})}function d(t,e){const n=e?.ignoreSlowConnection??!1;if(C(t,n))if(v.add(t),document.createElement("link").relList?.supports?.("prefetch")&&e?.with!=="fetch"){const r=document.createElement("link");r.rel="prefetch",r.setAttribute("href",t),document.head.append(r)}else fetch(t,{priority:"low"})}function C(t,e){if(!navigator.onLine||!e&&P())return!1;try{const n=new URL(t,location.href);return location.origin===n.origin&&(location.pathname!==n.pathname||location.search!==n.search)&&!v.has(t)}catch{}return!1}function s(t,e){if(t?.tagName!=="A")return!1;const n=t.dataset.astroPrefetch;return n==="false"?!1:e==="tap"&&(n!=null||u)&&P()?!0:n==null&&u||n===""?e===b:n===e}function P(){if("connection"in navigator){const t=navigator.connection;return t.saveData||/2g/.test(t.effectiveType)}return!1}function f(t){t();let e=!1;document.addEventListener("astro:page-load",()=>{if(!e){e=!0;return}t()})}function R(){const t=document.querySelector('[name="astro-view-transitions-fallback"]');return t?t.getAttribute("content"):"animate"}function w(t){return t.dataset.astroReload!==void 0}(L||R()!=="none")&&(document.addEventListener("click",t=>{let e=t.target;if(t.composed&&(e=t.composedPath()[0]),e instanceof Element&&(e=e.closest("a, area")),!(e instanceof HTMLAnchorElement)&&!(e instanceof SVGAElement)&&!(e instanceof HTMLAreaElement))return;const n=e instanceof HTMLElement?e.target:e.target.baseVal,r=e instanceof HTMLElement?e.href:e.href.baseVal,a=new URL(r,location.href).origin;w(e)||e.hasAttribute("download")||!e.href||n&&n!=="_self"||a!==location.origin||t.button!==0||t.metaKey||t.ctrlKey||t.altKey||t.shiftKey||t.defaultPrevented||(t.preventDefault(),g(r,{history:e.dataset.astroHistory==="replace"?"replace":"auto",sourceElement:e}))}),document.addEventListener("submit",t=>{let e=t.target;if(e.tagName!=="FORM"||t.defaultPrevented||w(e))return;const n=e,r=t.submitter,a=new FormData(n,r),i=typeof n.action=="string"?n.action:n.getAttribute("action"),E=typeof n.method=="string"?n.method:n.getAttribute("method");let c=r?.getAttribute("formaction")??i??location.pathname;const m=r?.getAttribute("formmethod")??E??"get";if(m==="dialog"||location.origin!==new URL(c,location.href).origin)return;const h={sourceElement:r??n};if(m==="get"){const A=new URLSearchParams(a),p=new URL(c);p.search=A.toString(),c=p.toString()}else h.formData=a;t.preventDefault(),g(c,h)}),T({prefetchAll:!0}));
